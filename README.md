# Інструкція запуску

1. **Встановіть пакети:**

```
npm install
```

2. **Запустіть застосунок:**

```
npm run start
```

3. Відкрийте у браузері: http://localhost:3000/

---

## Документація REST API

### Загальна інформація

Базова URL: `http://localhost:3000`

Всі ендпоінти повертають дані у форматі JSON.

---

### Ендпоінти

#### 1. Отримати список станцій

**Метод:** `GET`  
**URL:** `/api/stations`  
**Опис:** Повертає список всіх зарядних станцій з можливістю фільтрації, сортування та пагінації.

**Query параметри:**

- `status` (необов'язковий) - фільтрація за статусом станції (`active`, `busy`)
- `sort` (необов'язковий) - сортування у форматі `поле_порядок`:
  - `power_asc` - за потужністю (зростання)
  - `power_desc` - за потужністю (спадання)
  - `energy_asc` - за загальною енергією (зростання)
  - `energy_desc` - за загальною енергією (спадання)
  - `ports_asc` - за кількістю портів (зростання)
  - `ports_desc` - за кількістю портів (спадання)
- `page` (необов'язковий) - номер сторінки (за замовчуванням: 1)
- `limit` (необов'язковий) - кількість записів на сторінці (за замовчуванням: 6)

**Приклади запитів:**

```
GET /api/stations
GET /api/stations?status=active
GET /api/stations?sort=power_desc&page=1&limit=6
```

**Відповідь:**

```json
{
  "data": [...],
  "total": 3,
  "page": 1,
  "limit": 6
}
```

---

#### 2. Отримати станцію за ID

**Метод:** `GET`  
**URL:** `/api/stations/:id`  
**Опис:** Повертає інформацію про конкретну зарядну станцію.

**Параметри URL:**

- `id` - унікальний ідентифікатор станції

**Приклад запиту:**

```
GET /api/stations/1
```

**Відповідь (успіх):**

```json
{
  "id": 1,
  "name": "Станція перша",
  "address": "перша вулиця",
  "chargerCount": 4,
  "maxPower": 150,
  "availableChargers": 4,
  "totalEnergy": 1200,
  "status": "active"
}
```

**Відповідь (помилка):**

```json
{
  "message": "Станцію не знайдено"
}
```

---

#### 3. Створити нову станцію

**Метод:** `POST`  
**URL:** `/api/stations`  
**Опис:** Створює нову зарядну станцію в системі.

**Тіло запиту (JSON):**

```json
{
  "name": "Назва станції",
  "address": "Адреса станції",
  "maxPower": 150,
  "chargerCount": 4
}
```

**Обов'язкові поля:**

- `name` - назва станції
- `address` - адреса станції
- `maxPower` - максимальна потужність (від 50 до 500 кВт)
- `chargerCount` - кількість зарядних пристроїв (від 1 до 10)

**Відповідь (успіх):**

```json
{
  "id": 4,
  "name": "Назва станції",
  "address": "Адреса станції",
  "maxPower": 150,
  "chargerCount": 4,
  "availableChargers": 4,
  "totalEnergy": 0,
  "status": "active"
}
```

**Відповідь (помилка валідації):**

```json
{
  "message": "Відсутні обов'язкові поля"
}
```

або

```json
{
  "message": "Максимальна потужність має бути від 50 до 500 кВт"
}
```

або

```json
{
  "message": "Кількість зарядних пристроїв має бути від 1 до 10"
}
```

---

#### 4. Оновити станцію

**Метод:** `PUT`  
**URL:** `/api/stations/:id`  
**Опис:** Оновлює дані існуючої зарядної станції.

**Параметри URL:**

- `id` - унікальний ідентифікатор станції

**Тіло запиту (JSON):**

```json
{
  "name": "Нова назва",
  "address": "Нова адреса",
  "maxPower": 200
}
```

**Примітка:** Можна передавати лише ті поля, які потрібно оновити.

**Відповідь (успіх):**

```json
{
  "id": 1,
  "name": "Нова назва",
  "address": "Нова адреса",
  "maxPower": 200,
  ...
}
```

**Відповідь (помилка):**

```json
{
  "message": "Станцію не знайдено"
}
```

---

#### 5. Розпочати сесію зарядки

**Метод:** `POST`  
**URL:** `/api/stations/:id/start-session`  
**Опис:** Розпочинає сесію зарядки на станції.

**Параметри URL:**

- `id` - унікальний ідентифікатор станції

**Тіло запиту:** Не потрібне

**Відповідь (успіх):**

```json
{
  "id": 1,
  "name": "Станція перша",
  "availableChargers": 3,
  "status": "active",
  ...
}
```

**Відповідь (помилка):**

```json
{
  "message": "Станцію не знайдено"
}
```

або

```json
{
  "message": "Немає доступних зарядних пристроїв"
}
```

---

#### 6. Завершити сесію зарядки

**Метод:** `POST`  
**URL:** `/api/stations/:id/stop-session`  
**Опис:** Завершує сесію зарядки на станції.

**Параметри URL:**

- `id` - унікальний ідентифікатор станції

**Тіло запиту (JSON):**

```json
{
  "kwh": 50
}
```

**Обов'язкові поля:**

- `kwh` - кількість спожитої енергії в кВт (від 1 до 300)

**Відповідь (успіх):**

```json
{
  "id": 1,
  "name": "Станція перша",
  "availableChargers": 4,
  "status": "active",
  ...
}
```

**Відповідь (помилка):**

```json
{
  "message": "Станцію не знайдено"
}
```

або

```json
{
  "message": "Спожита енергія повинна бути від 1 до 300 кВт"
}
```

або

```json
{
  "message": "Усі зарядні пристрої вже вільні"
}
```

---

### Коди статусів HTTP

- `200 OK` - успішний запит
- `201 Created` - ресурс успішно створено
- `400 Bad Request` - помилка валідації даних
- `404 Not Found` - ресурс не знайдено
